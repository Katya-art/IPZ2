# Модуль аналізу тональності текстів на українській мові
Текстову інформацію у світі можна поділити на два основні типи: факти та думки. Факти - це об'єктивні вирази про сутності, події та їх властивості. Думки, як правило, є суб'єктивними виразами, що описують настрої, оцінки чи почуття людей до сутностей, подій та їх властивостей. 

Основна задача сентимент аналізу тексту, що містить висловлення думок, може бути сформульована наступним чином: якщо надано текст, що є суб’єктивним висловлюванням, то за припущення, що висловлювання має єдиний об’єкт, виявити емоційний відтінок тексту як одну з двох полярностей: позитивну чи негативну (sentiment polarity).

Визначення, чи має наданий текст в цілому позитивне чи негативне забарвлення називається “класифікацією полярності настроїв” (sentiment polarity classification) або “класифікацією полярності” (polarity classification). Одним з мінусів даного підходу є те, що емоційну складову документа не завжди можна однозначно визначити, тобто документ може містити як ознаки позитивної оцінки, так і ознаки негативної.

В аналізі тональності тексту вважається, що текстова інформація ділиться на два типи: факти і думки. Ключовим поняттям є визначення думки.
Думки поділяються на два типи: 
* проста думка;
* порівняння.

Проста думка містить висловлювання автора про один об'єкт. Вона може бути висловлена прямо: «Останні рішення ВТО просто прекрасні», або неявно: «Після важких і малоприємних реформ економіка почала зростати».

Думка першого типу може бути визначена формально: простою думкою називається кортеж з п'яти елементів (entity, feature, sentiment value, holder, time). В цьому визначенні автор (holder) висловив думку про аспект (feature) об’єкту entity в певний момент часу (time). Зазвичай виділяють два види емоцій (sentiment value): позитивна та негативна, тобто класифікація виконується за двома класами. Іноді додається третій - нейтральна думка.

Думка другого типу визначається як кортеж (Obj1, Obj2, A, holder, time). В даному кортежі Obj1 и Obj2 – множини порівнюваних за аспектом А об'єктів, які автор (holder) порівнює у момент часу time. На відміну від кортежу, який визначає думку першого типу, кортеж думки другого типу не містить прямої оцінки емоцій автора.

Задача визначення полярності тексту формулюється наступним чином: «визначити, яке емоційне забарвлення тексту, позитивне чи негативне?» Визначення полярності тексту зазвичай розглядається на декількох рівнях:
* на рівні документу. Основною задачею на цьому рівні є класифікація, чи повністю весь документ є відображенням позитивної чи негативної думки. Наприклад, для певної рецензії на товар, система автоматичного аналізу тональності тексту визначає, чи висловлює ця рецензія позивний настрій в цілому. Дана задача носить назву «класифікація полярності настроїв на рівні документу». Такий рівень деталізації передбачає, що кожен документ висловлює думку як єдину сутність. Тому він не може застосовуватись для документів, об’єктами яких є декілька сутностей. Однак в рамках данної задачі, зазвичай документи мають одне чітке емоційне забарвлення, бо коментарі до новин зазвичай є досить короткими емоційними текстами;
* на рівні речення. На цьому рівні об’єктом дослідження є окреме речення. Проводиться аналіз чи висловлює певне речення в цілому позитивну чи негативну думку. Аналіз на даному рівні близько пов’язаний з так званою «класифікацією суб’єктивності» (subjectivity classification), яка розрізняє речення (так звані об’єктивні речення) що висловлюють фактичну інформацію від речень, що висловлюють думки та погляди;
* на рівні сутності та аспекту. Обидва попередніх рівня не включають аналіз того, що саме сподобалося чи не сподобалося власнику думки. Аспектний рівень дозволяє виконати більш детальний аналіз. Замість того, щоб аналізувати лінгвістичні конструкції, аспектний рівень аналізує саму думку. Зазвичай, аналіз думки без аналізу її об’єкту має обмежене використання. Окрім того, визнання важливості аналізу об’єкту думки допомагає глибше зрозуміти проблему аналізу тональності. Наприклад, речення «Не зважаючи на поганий сервіс, мені все одно сподобався цей ресторан» має позитивний сентимент, але ми не можемо стверджувати, що воно є повністю позитивним. Власне, даний сентимент можна вважати позитивним лише в тому випадку, якщо в якості об’єкту обрано «ресторан». Якщо ж в якості об’єкту обрано «сервіс», то думка є повністю негативною. В багатьох дослідженнях об’єкти думки описуються сутностями та їх аспектами. Тобто, метою аналізу такого рівня є виявлення сентименту об’єкту та його властивостей. На такому рівні аналізу, можна отримати структурований підсумок думок щодо не тільки самого об’єкту, але і його властивостей, що перетворить неструктурований текст в структурований масив даних що може бути використаний для будь-яких типів аналізу.

Найбільш важливими індикаторами сентименту є «слова емоційного забарвлення» (sentiment words). Ці слова зазвичай використовуються для висловлення думки, позитивної чи негативної. Наприклад, «добре», «чудово», «неймовірно» – слова для висловлення позитивної думки, в той час як «погано», «жахливо», «сумно» – слова для висловлення негативної думки. Окрім безпосередньо слів, існують також фрази та ідіоми. Слова та вирази є інструментарієм аналізу тональності з очевидних причин. Набір таких слів та виразів називається «лексичним словником».

Незважаючи на те, що слова та вирази для вираження емоційного забарвлення ж дуже важливими при аналізі тональності, просто використання їх не є досить ефективним. Проблема є комплексною та набагато складнішою. Нижче показані основні проблеми, з якими можна стикнутися при виконанні аналізу тональності за словником:
* позитивне чи негативне слово може приймати протилежний відтінок при використанні в іншій предметній області. Так, наприклад, «У цього фільму передбачуваний сюжет» є негативною характеристикою, а «У цього коду передбачувана поведінка» є позитивною;
* Наявність неологізмів та помилок у словах, а це досить поширене у інтернет- культурі явище, у багатьох випадках робить використання словникових методів недоцільним;
* речення, що містить в собі слово емоційного забарвлення, може мати нейтральний сентимент. Цей феномен виникає зазвичай в декількох типах речень. Питальні речення та умовні речення є двома найважливішими типами, наприклад «Чи не могли в Ви порадити, яка з фотокамер Sony є найкращою?», та «Якщо я знайду дійсно хорошу камеру в цьому магазині, я її обов’язково куплю.» В обох цих реченнях є слова, що виражають позитивний настрій («найкраща», «хороша»), але жодне з цих речень не висловлює позитивну чи негативну думку щодо певної камери;
* речення, що містять сарказм з наявністю чи відсутністю слів емоційного забарвлення є дуже складними для аналізу, наприклад «Який чудовий телефон! Перестав працювати вже за два дні». Cарказм досить досить часто з’являється в політичних дебатах чи дискусіях, тому аналізувати політичні думки, як правило, досить важко. Ця проблема останнім часом має багато уваги, і навіть з’являються деякі практичні результати.

Всі описані вище проблеми є досить серйозними труднощами для виконання аналізу тональності, що базується на лексичному словнику. Тому, методи, що використовують лексичний словник, як правило, застосовуються рідше, ніж альтернативні методи.

Існують дві концепції, що дуже тісно пов’язані з класифікацією емоційного забарвлення думок – суб’єктивність та емоції.
Об’єктивне речення визначає певну фактичну інформацію щодо навколишнього світу, в той час як суб’єктивне твердження висловлює почуття та думки окремої людини.

Прикладом об’єктивного твердження є наступне речення: «iPhone є продуктом компанії Apple». Прикладом суб’єктивного твердження є наступне речення: «Мені подобається iPhone». Суб’єктивні твердження можуть виступати у самих різноманітних формах, таких як думки, твердження, бажання, переконання та інші. Існує певна проблема в літературі відрізнити суб’єктивність від висловлення думки. Під висловленням думки мається на увазі, що документ чи окреме речення висловлює позитивну чи негативну думку щодо певної сутності. Ці дві концепції не є еквівалентними, не дивлячись на те, що вони досить тісно перетинаються. Задача, що займається визначенням того, чи має документ суб’єктивне чи об’єктивне твердження носить назву «Класифікація суб’єктивності». Ми повинні мати на увазі наступне:
* суб’єктивне речення може не висловлювати ніякої думки. Наприклад, речення «Я думаю, що він пішов додому» є повністю суб’єктивним, але не висловлює нічого. Речення в попередньому прикладі також є повністю суб’єктивним та не висловлює позитивну, негативну чи нейтральну думку щодо камери або одного з її аспектів;
* об’єктивні речення можуть висловлювати думки на основі стверджування бажаних чи небажаних фактів. Наприклад, наступні два речення, що просто висловлюють факти об’єктивно також і висловлюють негативну думку (неявну негативну думку) щодо певних продуктів: «Ці навушники зламалися через два дні» або «Не дивлячись на те, що комп’ютер новий, він перестав вмикатися через місяць».

Окрім явних думок, які несуть в собі суб’єктивні висловлювання, дуже багато інших типів суб’єктивності вивчалися аналітиками, але не так інтенсивне. Дуже багато таких типів можуть також висловлювати ту чи іншу думку.

Емоції досить тісно пов’язані з висловленням думки. Вони були класифіковані та виділені в певні категорії – любов, здивування, радість, сум, страх. Сила емоційного забарвлення, що присутня в думці, як правило пов’язана з силою певної емоції, тому можна деколи зустріти не бінарну классифікацію на гарні/погані емоції а классифікацію за типами емоцій, що містить висловлювання. Найчастіше така классифікація відбувається за допомогою словникових методів, адже дуже важко отримати достатньо велику вибірку для того щоб гарно розрізняти декілька видів емоцій у висловлюваннях.

Підзадачі аналізу тональності

Розглянемо модель сутності. Нехай сутність ei представляється скінченним набором аспектів Ai = {ai1, ai2, ..., ain}. Ei може бути виражена будь якім іншим набором виразів сутності {eei1, eei2, ..., eein}. Кожен аспект сутності може бути представлений як набір виразів {аei1, аei2, ..., аein}.

Також, нехай емоційно забарвлений документ d містить в собі думки щодо набору сутностей {e1, e2, ..., en} та їх аспектів від певного набору власників думки в певний період часу.

Нарешті, маючи визначення емоційно забарвленого документу можна визначити основні задачі, що потрібно вирішити в процесі аналізу тональності.
Задача 1. Вилучення сутностей та їх категоризація. Вилучити всі вирази сутностей в емоційно забарвленому документі та виконати категоризацію та розбиття їх на класи сутностей. Кожен клас характеризує окрему сутність.
Задача 2. Вилучення аспектів сутностей та їх категоризація. Вилучити всі вирази сутностей в емоційно забарвленому документі та виконати категоризацію та розбиття їх на класи сутностей. Кожен клас характеризує окрему сутність.
Задача 3. Вилучення власників думки та їх класифікація. Вилучити власників думки та класифікувати їх. Ця задача є подібною до задач 1 та 2.
Задача 4. Вилучення часу та стандартизація. Необхідно вилучити всі часові проміжки, коли були висловлені думки їх власниками та стандартизувати різні формати представлення часу.
Задача 5. Класифікація емоційного забарвлення аспектів. Необхідно визначити, чи є думка що до аспекту aij позитивною, негативною чи нейтральною, або надати числове значення що визначає думку.

Кортеж з п'яти елементів, в вигляді якого ми дали визначення думці, надає дуже добре джерело для інформації, а також основу для генерації як якісних, так і кількісних підсумків. Загальна форма таких підсумків базується на аспектах і має назву підсумки, що базуються на аспектах.
